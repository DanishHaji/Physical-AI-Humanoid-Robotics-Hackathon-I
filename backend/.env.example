# =================================================================
# Physical AI Textbook - Backend Configuration (CLOUD FREE-TIER)
# =================================================================
# Stack: Groq + Qdrant Cloud + Neon + sentence-transformers
# Cost: $0/month (100% free tier)
# =================================================================

# -------------------------------------------------------------
# Application Settings
# -------------------------------------------------------------
APP_NAME="Physical AI Textbook RAG API (Cloud Free-Tier)"
APP_VERSION="3.0.0"
ENVIRONMENT="development"
DEBUG=true
HOST="0.0.0.0"
PORT=8000
RELOAD=true

# -------------------------------------------------------------
# Groq API Configuration (Cloud LLM - FREE)
# -------------------------------------------------------------
# Sign up: https://console.groq.com
# Free tier: 30 requests/min, no credit card required
# Model: llama-3.1-8b-instant (8B params, fast inference)

GROQ_API_KEY=""                           # Required - get from Groq console
GROQ_MODEL="llama-3.1-8b-instant"         # Free, fast (8B params)
GROQ_TEMPERATURE=0.1
GROQ_MAX_TOKENS=500
GROQ_BASE_URL="https://api.groq.com/openai/v1"

# -------------------------------------------------------------
# Sentence Transformers Configuration (Local Embeddings - FREE)
# -------------------------------------------------------------
# Model downloads automatically on first run
# No API keys or internet required after download

EMBEDDING_MODEL="all-MiniLM-L6-v2"        # 384 dimensions, fast (90MB)
# Alternative: "all-mpnet-base-v2" (768 dimensions, better quality, 420MB)

EMBEDDING_DEVICE="cpu"                     # Use "cuda" if you have GPU
VECTOR_SIZE=384                            # Must match embedding model dimensions

# -------------------------------------------------------------
# Qdrant Cloud Configuration (Cloud Vector Database - FREE)
# -------------------------------------------------------------
# Sign up: https://cloud.qdrant.io
# Free tier: 1GB cluster, no credit card required
# Storage: ~1M vectors (384-dim embeddings)

QDRANT_URL=""                              # Required - get from Qdrant Cloud dashboard
QDRANT_API_KEY=""                          # Required - get from Qdrant Cloud dashboard
QDRANT_COLLECTION_NAME="textbook_chunks"
QDRANT_DISTANCE="Cosine"

# -------------------------------------------------------------
# Neon PostgreSQL Configuration (Cloud Database - FREE)
# -------------------------------------------------------------
# Sign up: https://neon.tech
# Free tier: 0.5GB storage, 100 compute hours/month, auto-pause
# Connection string format: postgresql://user:pass@host/dbname?sslmode=require

NEON_DATABASE_URL=""                       # Required - connection string from Neon dashboard
NEON_MAX_CONNECTIONS=10

# -------------------------------------------------------------
# RAG Configuration
# -------------------------------------------------------------
RAG_TOP_K=5                                # Number of chunks to retrieve
RAG_SIMILARITY_THRESHOLD=0.7               # Minimum similarity score (0-1)
RAG_CHUNK_SIZE=1024                        # Max characters per chunk
RAG_CHUNK_OVERLAP=100                      # Overlap between chunks

# -------------------------------------------------------------
# Rate Limiting (protect free-tier quotas)
# -------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=20                   # Conservative (Groq allows 30/min)
RATE_LIMIT_PER_HOUR=100
RATE_LIMIT_PER_DAY=1000

# -------------------------------------------------------------
# CORS Configuration
# -------------------------------------------------------------
# Add your frontend URLs here (JSON array format)
ALLOWED_ORIGINS=["http://localhost:3000","http://localhost:8000","http://127.0.0.1:3000","http://127.0.0.1:8000"]

# =================================================================
# SETUP INSTRUCTIONS
# =================================================================
#
# 1. GROQ API (Free LLM)
#    - Sign up: https://console.groq.com
#    - Create API key in dashboard
#    - Paste key in GROQ_API_KEY above
#    - Free tier: 30 requests/min
#
# 2. QDRANT CLOUD (Free Vector Database)
#    - Sign up: https://cloud.qdrant.io
#    - Create free 1GB cluster
#    - Copy cluster URL to QDRANT_URL
#    - Create API key and paste in QDRANT_API_KEY
#
# 3. NEON POSTGRESQL (Free Database)
#    - Sign up: https://neon.tech
#    - Create new database
#    - Copy connection string to NEON_DATABASE_URL
#    - Format: postgresql://user:pass@host/dbname?sslmode=require
#
# 4. INSTALL PYTHON DEPENDENCIES
#    cd backend
#    pip install -r requirements.txt
#
# 5. COPY THIS FILE TO .env
#    cp .env.example .env
#    # Then edit .env and add your API keys
#
# 6. INITIALIZE NEON DATABASE
#    python scripts/init_neon.py
#
# 7. INGEST TEXTBOOK CHAPTERS
#    python scripts/ingest_to_qdrant.py
#
# 8. START API SERVER
#    uvicorn app.main:app --reload
#
# 9. TEST THE API
#    curl http://localhost:8000/health
#
# =================================================================
# DEPLOYMENT OPTIONS (ALL FREE)
# =================================================================
#
# Backend Deployment:
# - Render.com: 750 hours/month free
# - Railway.app: $5 free credits/month
# - Fly.io: 3 shared-cpu VMs free
#
# Frontend Deployment:
# - Vercel: Unlimited deployments
# - Netlify: 100GB bandwidth/month
# - Cloudflare Pages: Unlimited
#
# =================================================================
# COST BREAKDOWN: $0/month
# =================================================================
#
# Groq (LLM):              FREE (30 req/min)
# Qdrant Cloud (Vectors):  FREE (1GB cluster)
# Neon (PostgreSQL):       FREE (0.5GB, 100h/month)
# sentence-transformers:   FREE (runs locally)
#
# Total monthly cost: $0
#
# =================================================================
