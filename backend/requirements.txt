# ================================================================
# Physical AI Textbook - Backend Dependencies (GROQ + OPENAI)
# ================================================================
# Stack: Groq (LLM) + OpenAI (Embeddings) + Qdrant Cloud + Neon PostgreSQL
# Cost: $0/month (100% free tier services)
# RAM: Optimized for Render free tier (512MB)
# ================================================================

# FastAPI Framework
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
python-multipart>=0.0.6

# ================================================================
# CLOUD FREE-TIER SERVICES (LLM + Vector DB + PostgreSQL)
# ================================================================

# Groq API (Free LLM - llama-3.1-8b-instant)
# https://console.groq.com - 30 req/min free tier
groq>=0.30.0

# Qdrant Cloud (Free Vector Database - 1GB free)
# https://cloud.qdrant.io - 1GB cluster free tier
qdrant-client>=1.7.0

# Neon PostgreSQL (Free Serverless Database - 0.5GB free)
# https://neon.tech - 0.5GB storage, 100 compute hours/month
asyncpg>=0.29.0
psycopg2-binary>=2.9.9  # For sync operations

# ================================================================
# EMBEDDINGS (USING LOCAL SENTENCE-TRANSFORMERS - REMOVED API)
# ================================================================

# Using local sentence-transformers for embeddings to avoid API dependencies
sentence-transformers>=2.6.0
torch>=2.0.0
transformers>=4.21.0
numpy>=1.21.0

# For token counting (local approximation)
tiktoken>=0.7.0

# REMOVED: OpenAI API dependency for embeddings (now using local models)

# ================================================================
# DATA VALIDATION & CONFIGURATION
# ================================================================

pydantic>=2.5.0
pydantic-settings>=2.1.0
email-validator>=2.1.0  # Required for EmailStr validation

# Environment Variables
python-dotenv>=1.0.0

# ================================================================
# HTTP CLIENT & RATE LIMITING
# ================================================================

httpx>=0.26.0
slowapi>=0.1.9           # Rate limiting for free-tier protection

# ================================================================
# TESTING & LOGGING
# ================================================================

pytest>=7.4.3
pytest-asyncio>=0.23.3
structlog>=24.1.0

# ================================================================
# AUTHENTICATION & SECURITY
# ================================================================

passlib>=1.7.4       # Password hashing
bcrypt>=4.0.1        # Compatible version for passlib (fixes __about__ attribute issue)
python-jose[cryptography]>=3.3.0  # JWT tokens

# ================================================================
# UTILITIES
# ================================================================

python-dateutil>=2.8.2

# ================================================================
# DEPLOYMENT NOTES
# ================================================================

# RAM Usage Comparison:
# - OLD: sentence-transformers + torch = ~1GB RAM
# - NEW: Groq API only = ~50MB RAM
# - Perfect for Render free tier (512MB limit)

# 1. GROQ API (FREE):
#    - Sign up: https://console.groq.com
#    - Get API key from dashboard
#    - Models: llama-3.1-8b-instant (LLM)
#    - Rate limit: 30 requests/min

# 2. OPENAI API (FREE):
#    - Sign up: https://platform.openai.com/api-keys
#    - Get API key from dashboard
#    - Models: text-embedding-3-small (embeddings)
#    - Free tier: $5 credit (~10M tokens)

# 3. QDRANT CLOUD (FREE):
#    - Sign up: https://cloud.qdrant.io
#    - Create free 1GB cluster
#    - Get API key + cluster URL
#    - Storage: 1GB vectors free

# 4. NEON POSTGRESQL (FREE):
#    - Sign up: https://neon.tech
#    - Create database (free tier)
#    - Get connection string
#    - Limits: 0.5GB storage, 100 compute hours/month

# 5. DEPLOY BACKEND (FREE):
#    - Render.com: 750 hours/month free (512MB RAM limit)
#    - Railway.app: $5 free credits/month
#    - Fly.io: 3 shared-cpu VMs free

# ================================================================
# INSTALLATION
# ================================================================
#
# pip install -r requirements.txt
#
# ================================================================